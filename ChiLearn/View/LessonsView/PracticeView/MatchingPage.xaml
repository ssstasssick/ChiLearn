<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:ChiLearn.View.LessonsView.PracticeView"
             x:Class="ChiLearn.View.LessonsView.PracticeView.MatchingPage"
             x:Name="MatchingPageName"
             Title="Ð¡Ð¾Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ»Ð¾Ð²">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="16">

            <Label Text="Ð¡Ð¾Ð¿Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¸ÐµÑ€Ð¾Ð³Ð»Ð¸Ñ„Ñ‹ Ñ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð°Ð¼Ð¸"
                   FontSize="20"
                   FontAttributes="Bold"
                   HorizontalOptions="Center" />

            <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº ÑÐ»Ð¾Ð² Ð¸ Ð²Ñ‹Ð¿Ð°Ð´Ð°ÑŽÑ‰Ð¸Ñ… ÑÐ¿Ð¸ÑÐºÐ¾Ð² -->
            <CollectionView ItemsSource="{Binding Matches}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid ColumnDefinitions="*, 2*" Padding="5">
                            <!-- ÐšÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¾Ðµ ÑÐ»Ð¾Ð²Ð¾ -->
                            <Label Text="{Binding ChiWord}"
                                   FontSize="18"
                                   VerticalOptions="Center" />

                            <!-- Ð’Ñ‹Ð±Ð¾Ñ€ Ñ€ÑƒÑÑÐºÐ¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° -->
                            <Picker Grid.Column="1"
                                    Title="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´"
                                    ItemsSource="{Binding Source={x:Reference MatchingPageName}, Path=BindingContext.RussianWords}"
                                    SelectedItem="{Binding SelectedRu, Mode=TwoWay}" />

                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ -->
            <Button Text="ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ"
                    Command="{Binding SubmitMatchingCommand}"
                    BackgroundColor="DarkBlue"
                    TextColor="White"
                    HeightRequest="50"
                    IsVisible="{Binding ShowCheck}"
                    CornerRadius="12" />

            <!-- ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ… -->
            <StackLayout IsVisible="{Binding ShowRetry}" Spacing="10">
                <Label Text="Ð•ÑÑ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ¸. Ð¥Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ½Ð¾Ð²Ð°?" 
                       TextColor="Red"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
                <Button Text="ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ½Ð¾Ð²Ð°"
                        Command="{Binding RetryCommand}"
                        BackgroundColor="OrangeRed"
                        TextColor="White"
                        HeightRequest="50"
                        CornerRadius="12" />
                <Button Text="Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ðº Ñ‚ÐµÐ¾Ñ€Ð¸Ð¸"
                        Command="{Binding GoToTheoryCommand}"
                        BackgroundColor="Gray"
                        TextColor="White"
                        HeightRequest="50"
                        CornerRadius="12" />
                <Button Text="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ¸"
                        IsVisible="{Binding ShowRetry}"
                        Command="{Binding OnShowMistakesCommand}" />

                <CollectionView ItemsSource="{Binding Mistakes}"
                IsVisible="{Binding ShowMistakes}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Label Text="{Binding}" TextColor="Red" FontAttributes="Italic" />
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </StackLayout>

            <!-- ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸ ÑƒÑÐ¿ÐµÑ…Ðµ -->
            <StackLayout IsVisible="{Binding ShowContinue}" Spacing="10">
                <Label Text="ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð’ÑÐµ ÑÐ»Ð¾Ð²Ð° ÑÐ¾Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð²ÐµÑ€Ð½Ð¾ ðŸŽ‰"
                       TextColor="Green"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
                <Button Text="ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ð¿Ñ€Ð¾Ð¸Ð·Ð½Ð¾ÑˆÐµÐ½Ð¸ÑŽ"
                        Command="{Binding GoToPronunciationCommand}"
                        BackgroundColor="Green"
                        TextColor="White"
                        HeightRequest="50"
                        CornerRadius="12" />
            </StackLayout>
            <!--<StackLayout IsVisible="True" Spacing="10">
                <Label Text="ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð’ÑÐµ ÑÐ»Ð¾Ð²Ð° ÑÐ¾Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð²ÐµÑ€Ð½Ð¾ ðŸŽ‰"
           TextColor="Green"
           FontAttributes="Bold"
           HorizontalOptions="Center" />
                <Button Text="ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ð¿Ñ€Ð¾Ð¸Ð·Ð½Ð¾ÑˆÐµÐ½Ð¸ÑŽ"
            Command="{Binding GoToPronunciationCommand}"
            BackgroundColor="Green"
            TextColor="White"
            HeightRequest="50"
            CornerRadius="12" />
            </StackLayout>-->

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
